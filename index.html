<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Programming Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: #fff;
        }

        .container {
            background: #fff;
            display: flex;
            justify-content: space-between;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            width: 900px;
            height: 600px;
        }

        /* Left side for Question and Timer */
        .left-panel {
            flex: 1;
            text-align: left;
            padding-right: 20px;
        }

        .left-panel h2 {
            font-size: 30px;
            margin-bottom: 20px;
            color: #333;
        }

        .question {
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #333;
        }

        #questionNumber {
            font-size: 18px;
            margin-top: 10px;
            color: #333;
        }

        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow: auto;
            font-size: 16px;
            color: #333;
        }

        #timer {
            font-size: 26px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #e53935;
        }

        /* Right side for Team names, scores, and buttons */
        .right-panel {
            width: 250px;
            background-color: #f4f4f4;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .right-panel input[type="text"] {
            padding: 12px;
            width: 80%;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .right-panel input[type="text"]:focus {
            outline: none;
            border-color: #2196F3;
        }

        .button {
            background-color: #2196F3;
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .button:hover {
            background-color: #1e88e5;
        }

        .scoreboard {
            margin-top: 20px;
            font-size: 22px;
        }

        .scoreboard div {
            margin: 5px 0;
            font-weight: bold;
            color: #333;
        }

        .buttons-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .team-name {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }

        .result {
            margin-top: 20px;
            font-size: 22px;
            font-weight: bold;
            color: #2c6fbb;
        }

        .container .left-panel, .container .right-panel {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

    </style>
</head>
<body>

<div class="container">
    <!-- Left Panel for Question and Timer -->
    <div class="left-panel">
        <h2>Rust Programming Quiz</h2>
        
        <!-- Timer -->
        <div id="timer">Time left: <span id="time">02:00</span></div>

        <!-- Question Section -->
        <div class="question" id="question">Click "Start" to begin!</div>
        <div id="questionNumber">Question: 0 of 20</div>

        <!-- Code Snippet -->
        <pre><code id="code" class="language-rust"></code></pre>

        <!-- Start Button -->
        <button id="startButton" class="button" onclick="startQuiz()">Start</button>

        <!-- Next Question Button -->
        <button id="nextButton" class="button" onclick="nextQuestion()">Next</button>
    </div>

    <!-- Right Panel for Team names, scores, and buttons -->
    <div class="right-panel">
        <!-- Team Name Inputs -->
        <div class="team-name">
            <input type="text" id="team1Name" placeholder="Enter Team 1 Name" />
            <input type="text" id="team2Name" placeholder="Enter Team 2 Name" />
        </div>
        
        <!-- Scoreboard -->
        <div class="scoreboard">
            <div id="team1Score">Team 1: 0</div>
            <div id="team2Score">Team 2: 0</div>
        </div>

        <!-- Points Buttons -->
        <div class="buttons-container">
            <button class="button" onclick="addPoint(1)">Add Point for Team 1</button>
            <button class="button" onclick="addPoint(2)">Add Point for Team 2</button>
        </div>

        <!-- Quiz Result -->
        <div class="result" id="result"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-rust.min.js"></script>
<script>
    let timer;
    let timeLeft = 120; // 2 minutes timer (120 seconds)
    let questionCount = 0; // Track the number of questions answered
    let team1Score = 0; // Track Team 1 score
    let team2Score = 0; // Track Team 2 score
    let questions = [
        { question: "What is the output of the following code?", code: `fn main() {\nlet x = 5;\nlet y = 0;\nlet result = x / y;\nprintln!("Result: {}", result);\n}` },
        { question: "What does the following code do?", code: `fn main() {\nlet mut v = vec![1, 2, 3];\nlet element = v[3];\nprintln!("Element: {}", element);\n}` },
        { question: "What is the issue with this code?", code: `fn main() {\nlet s = "hello";\ns.push('!');\nprintln!("Modified string: {}", s);\n}` },
        { question: "What does the following code do?", code: `fn main() {\nlet x: u32 = "abc".parse().unwrap();\nprintln!("Parsed value: {}", x);\n}` },
        { question: "What is the result of the following code?", code: `fn main() {\nlet mut v = vec![1, 2, 3];\nlet first_element = v.get(0).unwrap();\nv.clear();\nprintln!("First element: {}", first_element);\n}` },
        { question: "What will be printed by this function?", code: `fn print_value<T>(value: T) {\nprintln!("Value: {}", value);\n}\nfn main() {\nlet text = "Hello, World!";\nprint_value(text);\n}` },
        { question: "What is the output of the following code?", code: `trait Greeting {\nfn greet(&self) -> String;\n}\nstruct Person {\nname: String,\n}\nimpl Greeting for Person {\nfn greet(&self) -> String {\nformat!("Hello, my name is {}.", self.name)\n}\n}\nfn main() {\nlet person = Person {\nname: String::from("Alice"),\n};\nprintln!("{}", person.greet());\n}` },
        { question: "What is the result of this code?", code: `struct Point<T> {\nx: T, y: T,\n}\nfn print_coordinates(point: Point<f64>) {\nprintln!("Coordinates: ({}, {})", point.x, point.y);\n}\nfn main() {\nlet point = Point { x: 3, y: 5 };\nprint_coordinates(point);\n}` },
        { question: "What does this code print?", code: `struct Person { name: String, age: u32, }\nfn print_person(person: &Person) {\nprintln!("Name: {}, Age: {}", person.name, person.age);\n}\nfn main() {\nlet name = "John Doe";\nlet age = "25";\nlet person = Person { name, age };\nprint_person(&person);\n}` },
        { question: "What will the following code output?", code: `struct Pair<T> {\nx: T, y: T,\n}\nfn print_sum(pair: Pair<i32>) {\nlet sum = pair.x + pair.y;\nprintln!("Sum: {}", sum);\n}\nfn main() {\nlet pair = Pair { x: 3, y: 5.0 };\nprint_sum(pair);\n}` },
        { question: "What is the purpose of the Printable trait?", code: `trait Printable {\nfn print(&self);\n}\nstruct Rectangle {\nwidth: f64, height: f64,\n}\nimpl Printable for Rectangle {\nfn print(&self) {\nprintln!("Rectangle: {} x {}", self.width, self.height);\n}\n}\nfn main() {\nlet rectangle = Rectangle { width: 10.0, height: 5.0 };\nrectangle.print();\n}` },
        { question: "What will the following code output?", code: `struct Point<T> {\nx: T, y: T,\n}\nfn print_coordinates(point: &Point<T>) {\nprintln!("Coordinates: ({}, {})", point.x, point.y);\n}\nfn main() {\nlet point = Point { x: 3, y: 5 };\nprint_coordinates(&point);\n}` },
        { question: "What is the result of the following code?", code: `struct Circle<T> {\nradius: T,\n}\nfn main() {\nlet circle = Circle { radius: 3.5 };\nlet radius: f64 = circle.radius;\nprintln!("Radius: {}", radius);\n}` },
        { question: "What will this code output?", code: `fn main() {\nlet mut count = 0;\nwhile count < 5 {\nprintln!("Count: {}", count);\ncount += 1;\n}\nbreak;\nprintln!("Loop ended");\n}` },
        { question: "What will the following code print?", code: `fn modify_vec(vec: &mut Vec<i32>) {\nvec.push(4);\n}\nfn main() {\nlet mut numbers = vec![1, 2, 3];\nmodify_vec(&numbers);\nprintln!("Numbers: {:?}", numbers);\n}` },
        { question: "What issue does this code have?", code: `use std::sync::{Arc, Mutex};\nuse std::thread;\nfn main() {\nlet resource1 = Arc::new(Mutex::new(1));\nlet resource2 = Arc::new(Mutex::new(2));\nlet resource1_clone = Arc::clone(&resource1);\nlet resource2_clone = Arc::clone(&resource2);\nlet handle1 = thread::spawn(move || {\nlet _guard1 = resource1.lock().unwrap();\nthread::sleep(std::time::Duration::from_secs(1));\nlet _guard2 = resource2_clone.lock().unwrap();\nprintln!("Thread 1 acquired both resources.");\n});\nlet handle2 = thread::spawn(move || {\nlet _guard2 = resource2.lock().unwrap();\nthread::sleep(std::time::Duration::from_secs(1));\nlet _guard1 = resource1_clone.lock().unwrap();\nprintln!("Thread 2 acquired both resources.");\n});\nhandle1.join().unwrap();\nhandle2.join().unwrap();\nprintln!("Both threads completed.");\n}` },
        { question: "What will be the output of this code?", code: `use std::thread;\nfn main() {\nlet handle = thread::spawn(|| {\nprintln!("Hello from the thread!");\n});\nprintln!("Main thread exiting");\n}` },
        { question: "What does this match statement do?", code: `fn main() {\nlet number = 42;\nmatch number {\n1..=10 => println!("Number is between 1 and 10"),\n11..=20 => println!("Number is between 11 and 20"),\n21..=30 => println!("Number is between 21 and 30"),\n_ => println!("Number is not in the expected range"),\n42 => println!("The Answer to the Ultimate Question of Life, the Universe, and Everything"),\n}\n}` },
        { question: "What is the issue with this code?", code: `use std::thread;\nuse std::time::Duration;\nasync fn fetch_data() -> Result<String, &'static str> {\nthread::sleep(Duration::from_secs(2));\nErr("Failed to fetch data")\n}\nfn main() {\nlet result = tokio::runtime::Runtime::new()\n.unwrap()\n.block_on(fetch_data());\nmatch result {\nOk(data) => println!("Received data: {}", data),\nErr(err) => println!("Error: {}", err),\n}\n}` },
        { question: "What will this code output?", code: `async fn do_something_async() {\nprintln!("Doing something asynchronously...");\n}\n#[tokio::main]\nasync fn main() {\ndo_something_async();\nprintln!("Main thread exiting");\n}` }
    ];

    function startQuiz() {
        let team1Name = document.getElementById("team1Name").value;
        let team2Name = document.getElementById("team2Name").value;
        if (!team1Name || !team2Name) {
            alert("Please enter names for both teams.");
            return;
        }
        
        document.getElementById("startButton").disabled = true;
        questionCount = 0;
        team1Score = 0;
        team2Score = 0;

        document.getElementById("team1Score").innerText = `Team 1: ${team1Score}`;
        document.getElementById("team2Score").innerText = `Team 2: ${team2Score}`;

        startNextQuestion();
    }

    function startNextQuestion() {
        if (questionCount < questions.length) {
            let currentQuestion = questions[questionCount];
            document.getElementById("question").innerText = currentQuestion.question;
            document.getElementById("code").innerHTML = currentQuestion.code; 
            Prism.highlightElement(document.getElementById("code"));
            document.getElementById("questionNumber").innerText = `Question: ${questionCount + 1} of 20`;

            // Reset Timer
            timeLeft = 120; // Reset to 2 minutes for each question
            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            document.getElementById("time").textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;

            // Start Timer
            timer = setInterval(() => {
                timeLeft--;
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                document.getElementById("time").textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
                if (timeLeft <= 0) {
                    clearInterval(timer); // Stop the timer
                    alert("Time's up! No points awarded.");
                    nextQuestion();
                }
            }, 1000);

            document.getElementById("nextButton").style.display = "block"; // Show the next question button
	    document.getElementById("startButton").style.display = "none"; 
            document.getElementById("team1Name").disabled = true;
            document.getElementById("team2Name").disabled = true;


        }
    }

    function nextQuestion() {
        questionCount++;
        clearInterval(timer); // Stop current timer
        if (questionCount < questions.length) {
            startNextQuestion();
        } else {
            showResult();
        }
    }

    function addPoint(teamNumber) {
        if (teamNumber === 1) {
            team1Score++;
            document.getElementById("team1Score").innerText = `Team 1: ${team1Score}`;
        } else if (teamNumber === 2) {
            team2Score++;
            document.getElementById("team2Score").innerText = `Team 2: ${team2Score}`;
        }
    }

    function showResult() {
        let result = '';
        if (team1Score > team2Score) {
            result = `Winner: Team 1 with ${team1Score} points!`;
        } else if (team2Score > team1Score) {
            result = `Winner: Team 2 with ${team2Score} points!`;
        } else {
            result = `It's a tie with ${team1Score} points each!`;
        }
        document.getElementById("result").innerText = result;
    }
</script>

</body>
</html>
