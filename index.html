<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Programming Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 800px;
            text-align: center;
        }

        #timer {
            font-size: 20px;
            margin-bottom: 20px;
        }

        .question {
            font-size: 18px;
            margin-bottom: 20px;
        }

        pre {
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap; /* This ensures the code respects newlines */
            word-wrap: break-word;
            overflow: auto;
        }

        .code-snippet {
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        #startButton, #nextButton {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        #nextButton {
            background-color: #2196F3;
        }

        #startButton:disabled, #nextButton:disabled {
            background-color: #ccc;
        }

        #nextButton {
            display: none;
        }

        #result {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Rust Programming Quiz</h2>
    <div id="timer">Time left: <span id="time">00:00</span></div>
    <div class="question" id="question">Click "Start" to begin!</div>
    <div id="questionNumber">Question: 0 of 20</div>
    <pre><code id="code" class="language-rust"></code></pre>
    <button id="startButton" onclick="startQuiz()">Start</button>
    <button id="nextButton" onclick="nextQuestion()">Next</button>
    <div id="result"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-rust.min.js"></script>
<script>
    let timer;
    let timeLeft = 300; // 5 minutes timer (300 seconds)
    let questionCount = 0; // Track the number of questions answered
    let questions = [
        { question: "What is the output of the following code?", code: `fn main() {\nlet x = 5;\nlet y = 0;\nlet result = x / y;\nprintln!("Result: {}", result);\n}` },
        { question: "What does the following code do?", code: `fn main() {\nlet mut v = vec![1, 2, 3];\nlet element = v[3];\nprintln!("Element: {}", element);\n}` },
        { question: "What is the issue with this code?", code: `fn main() {\nlet s = "hello";\ns.push('!');\nprintln!("Modified string: {}", s);\n}` },
        { question: "What does the following code do?", code: `fn main() {\nlet x: u32 = "abc".parse().unwrap();\nprintln!("Parsed value: {}", x);\n}` },
        { question: "What is the result of the following code?", code: `fn main() {\nlet mut v = vec![1, 2, 3];\nlet first_element = v.get(0).unwrap();\nv.clear();\nprintln!("First element: {}", first_element);\n}` },
        { question: "What will be printed by this function?", code: `fn print_value<T>(value: T) {\nprintln!("Value: {}", value);\n}\nfn main() {\nlet text = "Hello, World!";\nprint_value(text);\n}` },
        { question: "What is the output of the following code?", code: `trait Greeting {\nfn greet(&self) -> String;\n}\nstruct Person {\nname: String,\n}\nimpl Greeting for Person {\nfn greet(&self) -> String {\nformat!("Hello, my name is {}.", self.name)\n}\n}\nfn main() {\nlet person = Person {\nname: String::from("Alice"),\n};\nprintln!("{}", person.greet());\n}` },
        { question: "What is the result of this code?", code: `struct Point<T> {\nx: T, y: T,\n}\nfn print_coordinates(point: Point<f64>) {\nprintln!("Coordinates: ({}, {})", point.x, point.y);\n}\nfn main() {\nlet point = Point { x: 3, y: 5 };\nprint_coordinates(point);\n}` },
        { question: "What does this code print?", code: `struct Person { name: String, age: u32, }\nfn print_person(person: &Person) {\nprintln!("Name: {}, Age: {}", person.name, person.age);\n}\nfn main() {\nlet name = "John Doe";\nlet age = "25";\nlet person = Person { name, age };\nprint_person(&person);\n}` },
        { question: "What will the following code output?", code: `struct Pair<T> {\nx: T, y: T,\n}\nfn print_sum(pair: Pair<i32>) {\nlet sum = pair.x + pair.y;\nprintln!("Sum: {}", sum);\n}\nfn main() {\nlet pair = Pair { x: 3, y: 5.0 };\nprint_sum(pair);\n}` },
        { question: "What is the purpose of the Printable trait?", code: `trait Printable {\nfn print(&self);\n}\nstruct Rectangle {\nwidth: f64, height: f64,\n}\nimpl Printable for Rectangle {\nfn print(&self) {\nprintln!("Rectangle: {} x {}", self.width, self.height);\n}\n}\nfn main() {\nlet rectangle = Rectangle { width: 10.0, height: 5.0 };\nrectangle.print();\n}` },
        { question: "What will the following code output?", code: `struct Point<T> {\nx: T, y: T,\n}\nfn print_coordinates(point: &Point<T>) {\nprintln!("Coordinates: ({}, {})", point.x, point.y);\n}\nfn main() {\nlet point = Point { x: 3, y: 5 };\nprint_coordinates(&point);\n}` },
        { question: "What is the result of the following code?", code: `struct Circle<T> {\nradius: T,\n}\nfn main() {\nlet circle = Circle { radius: 3.5 };\nlet radius: f64 = circle.radius;\nprintln!("Radius: {}", radius);\n}` },
        { question: "What will this code output?", code: `fn main() {\nlet mut count = 0;\nwhile count < 5 {\nprintln!("Count: {}", count);\ncount += 1;\n}\nbreak;\nprintln!("Loop ended");\n}` },
        { question: "What will the following code print?", code: `fn modify_vec(vec: &mut Vec<i32>) {\nvec.push(4);\n}\nfn main() {\nlet mut numbers = vec![1, 2, 3];\nmodify_vec(&numbers);\nprintln!("Numbers: {:?}", numbers);\n}` },
        { question: "What issue does this code have?", code: `use std::sync::{Arc, Mutex};\nuse std::thread;\nfn main() {\nlet resource1 = Arc::new(Mutex::new(1));\nlet resource2 = Arc::new(Mutex::new(2));\nlet resource1_clone = Arc::clone(&resource1);\nlet resource2_clone = Arc::clone(&resource2);\nlet handle1 = thread::spawn(move || {\nlet _guard1 = resource1.lock().unwrap();\nthread::sleep(std::time::Duration::from_secs(1));\nlet _guard2 = resource2_clone.lock().unwrap();\nprintln!("Thread 1 acquired both resources.");\n});\nlet handle2 = thread::spawn(move || {\nlet _guard2 = resource2.lock().unwrap();\nthread::sleep(std::time::Duration::from_secs(1));\nlet _guard1 = resource1_clone.lock().unwrap();\nprintln!("Thread 2 acquired both resources.");\n});\nhandle1.join().unwrap();\nhandle2.join().unwrap();\nprintln!("Both threads completed.");\n}` },
        { question: "What will be the output of this code?", code: `use std::thread;\nfn main() {\nlet handle = thread::spawn(|| {\nprintln!("Hello from the thread!");\n});\nprintln!("Main thread exiting");\n}` },
        { question: "What does this match statement do?", code: `fn main() {\nlet number = 42;\nmatch number {\n1..=10 => println!("Number is between 1 and 10"),\n11..=20 => println!("Number is between 11 and 20"),\n21..=30 => println!("Number is between 21 and 30"),\n_ => println!("Number is not in the expected range"),\n42 => println!("The Answer to the Ultimate Question of Life, the Universe, and Everything"),\n}\n}` },
        { question: "What is the issue with this code?", code: `use std::thread;\nuse std::time::Duration;\nasync fn fetch_data() -> Result<String, &'static str> {\nthread::sleep(Duration::from_secs(2));\nErr("Failed to fetch data")\n}\nfn main() {\nlet result = tokio::runtime::Runtime::new()\n.unwrap()\n.block_on(fetch_data());\nmatch result {\nOk(data) => println!("Received data: {}", data),\nErr(err) => println!("Error: {}", err),\n}\n}` },
        { question: "What will this code output?", code: `async fn do_something_async() {\nprintln!("Doing something asynchronously...");\n}\n#[tokio::main]\nasync fn main() {\ndo_something_async();\nprintln!("Main thread exiting");\n}` }
    ];

    let questionInterval;
    let startTime;
    let endTime;
    let timeSpent;
    
    function startQuiz() {
        document.getElementById("startButton").disabled = true;
        let minutes = Math.floor(timeLeft / 60);
        let seconds = timeLeft % 60;
        document.getElementById("time").textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        timer = setInterval(function() {
            timeLeft--;
            minutes = Math.floor(timeLeft / 60);
            seconds = timeLeft % 60;
            document.getElementById("time").textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
            if (timeLeft <= 0) {
                clearInterval(timer);
                showResult();
            }
        }, 1000);

        questionCount = 0;
        showQuestion();
        document.getElementById("nextButton").style.display = "block";
        document.getElementById("startButton").style.display = "none";

    }

    function showQuestion() {
        if (questionCount < questions.length) {
            let currentQuestion = questions[questionCount];
            document.getElementById("question").innerText = currentQuestion.question;
            document.getElementById("code").innerHTML = currentQuestion.code; // Remove the <br> part
            Prism.highlightAll();
            document.getElementById("questionNumber").innerText = `Question: ${questionCount + 1} of 20`;
        }
    }

    function nextQuestion() {
        questionCount++;
        if (questionCount < questions.length) {
            showQuestion();
        } else {
            clearInterval(timer);
            showResult();
        }
    }

    function showResult() {
        document.getElementById("result").innerText = "Quiz Over!";
        document.getElementById("nextButton").style.display = "none";
    }
</script>

</body>
</html>
